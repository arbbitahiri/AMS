@using AMS.Models.Shared
@model SideProfile
@{
    UserModel user = (UserModel)ViewData["User"];
    var currentRole = User.Claims.Where(t => t.Type == "http://schemas.microsoft.com/ws/2008/06/identity/claims/role").FirstOrDefault();
}

<div class="dropdown-menu p-0 m-0 dropdown-menu-right dropdown-menu-anim-up dropdown-menu-lg">
    <div class="d-flex flex-column py-10 bgi-size-cover bgi-no-repeat rounded-top" style="background-image: url('/assets2/media/misc/bg-1.jpg')">
        <div class="d-flex flex-center rounded-top px-3">
            <div class="symbol symbol-50 mr-5">
                <img alt="Logo" src="@Url.Content(Model.ProfileImage ?? "~/images/user-default.png")">
            </div>
            <div class="d-flex flex-column">
                <div class="fw-bold text-light d-flex align-items-center fs-5">
                    @Model.Name
                </div>
                <a href="#" class="fw-semibold text-muted text-hover-primary fs-7">@Model.Email</a>
            </div>
        </div>
    </div>
    <ul class="navi navi-hover my-2">
        <li class="navi-item px-1">
            <a href="/Identity/Account/Manage" class="navi-link px-5">@Resource.Profile</a>
        </li>
    </ul>
    @if (Model.Roles.Count > 1)
    {
        <div class="separator separator-solid my-2"></div>
        <ul class="navi-nav">
            <li class="navi-item px-1">
                <a href="#" class="text-dark px-5">@Resource.Roles</a>
            </li>
            @foreach (var role in Model.Roles)
            {
                <li class="navi-item px-3">
                    <a href="#" class="navi-link @(role.Name == currentRole.Value ? "active" : "") px-5" onclick="change_role(CSS.escape('@role.RoleIde'))">@role.Title</a>
                </li>
            }
        </ul>
    }
    <div class="separator separator-solid my-2"></div>
    <ul class="navi navi-hover mb-2">
        <li class="navi-item px-1">
            <form method="post" action="/Identity/Account/Logout" id="frm_logout">
                @Html.AntiForgeryToken()
                <a href="#" onclick="$('#frm_logout').trigger('submit')" class="navi-link px-5">@Resource.LogOut</a>
            </form>
        </li>
    </ul>
</div>
