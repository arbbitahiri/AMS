@inject IConfiguration conf
@{
    UserModel user = (UserModel)ViewData["User"];
    ErrorVM error = (ErrorVM)ViewData["Error"] ?? new ErrorVM();
    var controller = this.ViewContext.RouteData.Values["controller"] ?? "";
    var action = this.ViewContext.RouteData.Values["action"] ?? "";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - @Resource.AMS</title>

    <link rel="shortcut icon" href="~/favicon.ico" />

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" />
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.3.0/css/flag-icon.min.css">

    <link rel="stylesheet" asp-append-version="true" href="~/css/site.css">
    <link rel="stylesheet" asp-append-version="true" href="~/assets2/plugins/global/plugins.bundle.css"/>
    <link rel="stylesheet" asp-append-version="true" href="~/assets2/plugins/custom/prismjs/prismjs.bundle.css"/>
    <link rel="stylesheet" asp-append-version="true" href="~/assets2/css/style.bundle.css"/>
    @if (user.Mode == TemplateMode.Light)
    {
        <link href="~/assets2/css/themes/layout/brand/light.css" rel="stylesheet" type="text/css" asp-append-version="true" />
        <link href="~/assets2/css/themes/layout/aside/light.css" rel="stylesheet" type="text/css" asp-append-version="true" />
    }
    else
    {
        <link href="~/assets2/css/themes/layout/brand/dark.css" rel="stylesheet" type="text/css" asp-append-version="true" />
        <link href="~/assets2/css/themes/layout/aside/dark.css" rel="stylesheet" type="text/css" asp-append-version="true" />
    }
    <link rel="stylesheet" type="text/css" asp-append-version="true" href="~/lib/datatables/css/dataTables.bootstrap4.min.css"/>
    <link rel="stylesheet" type="text/css" asp-append-version="true" href="~/lib/datatables/css/responsive.dataTables.min.css"/>
    <link rel="stylesheet" type="text/css" asp-append-version="true" href="~/lib/datatables/css/buttons.dataTables.min.css"/>

    <style>
        .custom-file-input:lang(en) ~ .custom-file-label::after {
            content: "@Resource.Browse"
        }
    </style>
</head>
<body id="kt_body" class="header-fixed header-mobile-fixed subheader-enabled subheader-fixed aside-enabled aside-fixed aside-minimize-hoverable page-loading">
    <script src="~/lib/microsoft/signalr/dist/browser/signalr.min.js" asp-append-version="true"></script>
    <script>
        var connection = new signalR.HubConnectionBuilder().withUrl('/notificationHub').withAutomaticReconnect().build();
    </script>

    <div class="d-flex flex-column flex-root">
        <div class="d-flex flex-row flex-column-fluid page">
            <div class="aside aside-left aside-fixed d-flex flex-column flex-row-auto" id="kt_aside">
                <div class="brand flex-column-auto" id="kt_brand">
                    <div class="d-flex align-items-center">
                        <img src="~/favicon.ico" asp-append-version="true" class="max-h-50px ml-1" />
                        <a href="/" class="font-size-h1 font-weight-bolder ml-4" id="kt_brand_title" style="color: white">AMS</a>
                    </div>
                    <button class="brand-toggle btn btn-sm px-0" id="kt_aside_toggle">
                        <span class="svg-icon svg-icon svg-icon-xl">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <polygon points="0 0 24 0 24 24 0 24" />
                                    <path d="M5.29288961,6.70710318 C4.90236532,6.31657888 4.90236532,5.68341391 5.29288961,5.29288961 C5.68341391,4.90236532 6.31657888,4.90236532 6.70710318,5.29288961 L12.7071032,11.2928896 C13.0856821,11.6714686 13.0989277,12.281055 12.7371505,12.675721 L7.23715054,18.675721 C6.86395813,19.08284 6.23139076,19.1103429 5.82427177,18.7371505 C5.41715278,18.3639581 5.38964985,17.7313908 5.76284226,17.3242718 L10.6158586,12.0300721 L5.29288961,6.70710318 Z" fill="#000000" fill-rule="nonzero" transform="translate(8.999997, 11.999999) scale(-1, 1) translate(-8.999997, -11.999999)" />
                                    <path d="M10.7071009,15.7071068 C10.3165766,16.0976311 9.68341162,16.0976311 9.29288733,15.7071068 C8.90236304,15.3165825 8.90236304,14.6834175 9.29288733,14.2928932 L15.2928873,8.29289322 C15.6714663,7.91431428 16.2810527,7.90106866 16.6757187,8.26284586 L22.6757187,13.7628459 C23.0828377,14.1360383 23.1103407,14.7686056 22.7371482,15.1757246 C22.3639558,15.5828436 21.7313885,15.6103465 21.3242695,15.2371541 L16.0300699,10.3841378 L10.7071009,15.7071068 Z" fill="#000000" fill-rule="nonzero" opacity="0.3" transform="translate(15.999997, 11.999999) scale(-1, 1) rotate(-270.000000) translate(-15.999997, -11.999999)" />
                                </g>
                            </svg>
                        </span>
                    </button>
                </div>
                <div class="aside-menu-wrapper flex-column-fluid" id="kt_aside_menu_wrapper">
                    <div id="kt_aside_menu" class="aside-menu my-4" data-menu-vertical="1" data-menu-scroll="1" data-menu-dropdown-timeout="500">
                        @await Component.InvokeAsync("Menu")
                    </div>
                </div>
            </div>

            <div class="d-flex flex-column flex-row-fluid wrapper" id="kt_wrapper">
                <div class="header header-fixed" id="kt_header">
                    <div class="container-fluid d-flex align-items-stretch justify-content-between">
                        <div class="header-menu-wrapper header-menu-wrapper-left align-self-center font-size-h6 font-size-h3-xl font-weight-boldest" style="color: #3699ff;" id="kt_header_menu_wrapper">
                            @Resource.AMSTitle
                        </div>
                        <div class="align-self-center">
                            <div class="topbar justify-content-between">
                                <div class="d-lg-none align-self-center font-weight-bolder font-size-h5 text-white">
                                    <div class="btn btn-icon btn-active-light-primary" id="kt_aside_mobile_toggle">
                                        <span class="svg-icon svg-icon-2x mt-1">
                                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                    <rect x="0" y="0" width="24" height="24"></rect>
                                                    <rect fill="#000000" x="4" y="5" width="16" height="3" rx="1.5"></rect>
                                                    <path d="M5.5,15 L18.5,15 C19.3284271,15 20,15.6715729 20,16.5 C20,17.3284271 19.3284271,18 18.5,18 L5.5,18 C4.67157288,18 4,17.3284271 4,16.5 C4,15.6715729 4.67157288,15 5.5,15 Z M5.5,10 L18.5,10 C19.3284271,10 20,10.6715729 20,11.5 C20,12.3284271 19.3284271,13 18.5,13 L5.5,13 C4.67157288,13 4,12.3284271 4,11.5 C4,10.6715729 4.67157288,10 5.5,10 Z" fill="#000000" opacity="0.3"></path>
                                                </g>
                                            </svg>
                                        </span>
                                    </div>
                                    <a href="/Home/Index" class="text-white"><img src="~/favicon.ico" asp-append-version="true" class="max-h-40px" />AMS</a>
                                </div>
                                <div class="d-flex">
                                    <div class="dropdown" id="kt_quick_search_toggle">
                                        <div class="topbar-item" onclick="quick_search()" data-toggle="dropdown" data-offset="10px,0px">
                                            <div class="btn btn-icon btn-clean btn-lg btn-dropdown mr-1">
                                                <span class="svg-icon svg-icon-xl svg-icon-primary">
                                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                            <rect x="0" y="0" width="24" height="24" />
                                                            <path d="M14.2928932,16.7071068 C13.9023689,16.3165825 13.9023689,15.6834175 14.2928932,15.2928932 C14.6834175,14.9023689 15.3165825,14.9023689 15.7071068,15.2928932 L19.7071068,19.2928932 C20.0976311,19.6834175 20.0976311,20.3165825 19.7071068,20.7071068 C19.3165825,21.0976311 18.6834175,21.0976311 18.2928932,20.7071068 L14.2928932,16.7071068 Z" fill="#000000" fill-rule="nonzero" opacity="0.3" />
                                                            <path d="M11,16 C13.7614237,16 16,13.7614237 16,11 C16,8.23857625 13.7614237,6 11,6 C8.23857625,6 6,8.23857625 6,11 C6,13.7614237 8.23857625,16 11,16 Z M11,18 C7.13400675,18 4,14.8659932 4,11 C4,7.13400675 7.13400675,4 11,4 C14.8659932,4 18,7.13400675 18,11 C18,14.8659932 14.8659932,18 11,18 Z" fill="#000000" fill-rule="nonzero" />
                                                        </g>
                                                    </svg>
                                                </span>
                                            </div>
                                        </div>
                                        <div id="kt_quick_search_result" class="dropdown-menu p-0 m-0 dropdown-menu-right dropdown-menu-anim-up dropdown-menu-lg" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(-292px, 65px, 0px);" x-placement="bottom-end"></div>
                                    </div>

                                    <partial name="_Language" model="user.Language" />

                                    <div class="dropdown">
                                        <div class="topbar-item" data-toggle="dropdown" data-offset="10px,0px">
                                            <div class="btn btn-icon btn-icon-mobile w-auto btn-clean d-flex align-items-center btn-lg" id="kt_quick_user_toggle">
                                                <span class="text-muted font-weight-bold font-size-base d-none d-md-inline mr-1">@Resource.Hi,</span>
                                                <span class="text-dark-50 font-weight-bolder font-size-base d-none d-md-inline mr-3">@user.FirstName</span>
                                                <span class="symbol symbol-lg-35 symbol-25 symbol-light-success">
                                                    <img src="@Url.Content(user.ImageProfile ?? "~/Media/user.png")" loading="lazy" />
                                                </span>
                                            </div>
                                        </div>
                                        @await Component.InvokeAsync("Profile")
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content d-flex flex-column flex-column-fluid" id="kt_content">
                    <div class="progress d-none">
                        <div id="kt_prg_reg" class="progress-bar progress-bar-striped progress-bar-animated bg-primary" role="progressbar" style="width: 0%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">1/200</div>
                    </div>
                    <div class="subheader py-1 subheader-solid" id="kt_subheader">
                        <div class="container-fluid d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap">
                            <div class="d-flex align-items-center flex-wrap mr-2">
                                <h5 class="text-dark font-weight-bold mt-2 mb-2 mr-5">@ViewData["Title"]</h5>
                            </div>
                        </div>
                    </div>
                    @if (error.Status != 0)
                    {
                        <div class="alertMsg mb-6 mx-8">
                            <partial name="_AlertMessage" model="error" />
                        </div>
                    }
                    <div class="main-body">
                        @RenderBody()
                    </div>
                </div>

                <div class="footer bg-white py-4 d-flex flex-lg-column shadow" id="kt_footer">
                    <div class="container-fluid d-flex flex-column flex-md-row align-items-center justify-content-between">
                        <div class="text-dark order-2 order-md-1">
                            <span class="text-muted font-weight-bold mr-2">@DateTime.Now.Year©</span>
                            <a href="#" target="_blank" class="text-dark-75 text-hover-primary">AMS</a>
                        </div>
                        <div class="nav nav-dark">
                            <a href="#" target="_blank" class="nav-link pl-0 pr-5">@Resource.DevelopedBy: &nbsp;<b>Arb Tahiri</b></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="kt_scrolltop" class="scrolltop">
        <span class="svg-icon">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <polygon points="0 0 24 0 24 24 0 24" />
                    <rect fill="#000000" opacity="0.3" x="11" y="10" width="2" height="10" rx="1" />
                    <path d="M6.70710678,12.7071068 C6.31658249,13.0976311 5.68341751,13.0976311 5.29289322,12.7071068 C4.90236893,12.3165825 4.90236893,11.6834175 5.29289322,11.2928932 L11.2928932,5.29289322 C11.6714722,4.91431428 12.2810586,4.90106866 12.6757246,5.26284586 L18.6757246,10.7628459 C19.0828436,11.1360383 19.1103465,11.7686056 18.7371541,12.1757246 C18.3639617,12.5828436 17.7313944,12.6103465 17.3242754,12.2371541 L12.0300757,7.38413782 L6.70710678,12.7071068 Z" fill="#000000" fill-rule="nonzero" />
                </g>
            </svg>
        </span>
    </div>

    <partial name="_ModalPartial" model="user" />
    <partial name="_LoadingPartial" />

    <script asp-append-version="true" src="~/assets2/plugins/global/plugins.bundle.js"></script>
    <script asp-append-version="true" src="~/assets2/plugins/custom/prismjs/prismjs.bundle.js"></script>
    <script asp-append-version="true" src="~/assets2/js/scripts.bundle.js"></script>
    <script asp-append-version="true" src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script asp-append-version="true" src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    <script asp-append-version="true" src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script asp-append-version="true" src="~/lib/jquery-ajax-unobtrusive/jquery.unobtrusive-ajax.min.js"></script>
    <script asp-append-version="true" src="~/lib/datatables/js/jquery.dataTables.min.js"></script>
    <script asp-append-version="true" src="~/lib/datatables/js/dataTables.bootstrap4.min.js"></script>
    <script asp-append-version="true" src="~/lib/datatables/js/dataTables.responsive.min.js"></script>
    <script asp-append-version="true" src="~/lib/datatables/js/dataTables.buttons.min.js"></script>
    <script asp-append-version="true" src="~/lib/datatables/js/buttons.flash.min.js"></script>
    <script asp-append-version="true" src="~/lib/datatables/js/jszip.min.js"></script>
    <script asp-append-version="true" src="~/lib/datatables/js/vfs_fonts.min.js"></script>
    <script asp-append-version="true" src="~/js/SignalRUtils.js"></script>
    <script asp-append-version="true" src="~/js/JQueryCustomValidation.js"></script>
    <script asp-append-version="true" src="~/lib/lazysizes/lazysizes.min.js"></script>
    <script asp-append-version="true" src="~/js/site.js"></script>

    <script>
        var culture = '@System.Globalization.CultureInfo.CurrentCulture.Name';
        var cultureShort = '@System.Globalization.CultureInfo.CurrentCulture.Name.Substring(0, 2)';
        var cult = cultureShort == 'en' ? 'en-gb' : 'sq';

        var aside = localStorage.getItem('aside');
        if (aside == 'min') {
            document.getElementById('kt_brand_title').className += " d-none";
        }

        $(document).idleTimer(@conf["AppSettings:Timeout"]);
        $(document).on("idle.idleTimer", function (event, elem, obj) {
            window.location.href = '/Identity/Account/Timeout?returnUrl=' + window.location.pathname;
        });
    </script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
