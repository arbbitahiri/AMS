@using AMS.Models.Profile
@model ProfileVM
@{
    ViewData["Title"] = Resource.Profile;
    ErrorVM error = (ErrorVM)ViewData["Error"] ?? new ErrorVM();
}

@if (error.Status != 0)
{
    <div style="margin: 7px;">
        <partial name="_AlertMessage" model="error" />
    </div>
}

<div class="d-flex flex-row">
    <div id="kt_profile_aside" class="flex-row-auto offcanvas-mobile w-300px w-xl-350px">
        <div class="card card-custom card-stretch">
            <div class="card-body pt-10 pb-0">
                <div class="d-flex align-items-center">
                    <div class="symbol symbol-60 symbol-xxl-100 mr-5 align-self-start align-self-xxl-center">
                        <div id="kt_profile_avatar" class="symbol-label shadow" style="background-image:url('../../../../../@Url.Content(Model.ProfileImage ?? "assets2/media/users/default.jpg")')"></div>
                    </div>
                    <div>
                        <a href="#" class="font-weight-bolder font-size-h5 text-dark-75 text-hover-primary">@Model.FirstName @Model.LastName</a>
                        <div class="text-muted">@Model.Department</div>
                    </div>
                </div>
                <div class="pt-9">
                    <div class="d-flex align-items-center pb-9">
                        <div class="symbol symbol-45 symbol-light mr-4">
                            <span class="symbol-label">
                                <span class="svg-icon svg-icon-2x svg-icon-dark-50">
                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <polygon points="0 0 24 0 24 24 0 24" />
                                            <path d="M18,14 C16.3431458,14 15,12.6568542 15,11 C15,9.34314575 16.3431458,8 18,8 C19.6568542,8 21,9.34314575 21,11 C21,12.6568542 19.6568542,14 18,14 Z M9,11 C6.790861,11 5,9.209139 5,7 C5,4.790861 6.790861,3 9,3 C11.209139,3 13,4.790861 13,7 C13,9.209139 11.209139,11 9,11 Z" fill="#000000" fill-rule="nonzero" opacity="0.3" />
                                            <path d="M17.6011961,15.0006174 C21.0077043,15.0378534 23.7891749,16.7601418 23.9984937,20.4 C24.0069246,20.5466056 23.9984937,21 23.4559499,21 L19.6,21 C19.6,18.7490654 18.8562935,16.6718327 17.6011961,15.0006174 Z M0.00065168429,20.1992055 C0.388258525,15.4265159 4.26191235,13 8.98334134,13 C13.7712164,13 17.7048837,15.2931929 17.9979143,20.2 C18.0095879,20.3954741 17.9979143,21 17.2466999,21 C13.541124,21 8.03472472,21 0.727502227,21 C0.476712155,21 -0.0204617505,20.45918 0.00065168429,20.1992055 Z" fill="#000000" fill-rule="nonzero" />
                                        </g>
                                    </svg>
                                </span>
                            </span>
                        </div>
                        <div class="d-flex flex-column flex-grow-1">
                            <a href="#" class="text-dark-75 text-hover-primary mb-1 font-size-lg font-weight-bolder">@Resource.Role</a>
                            <span class="text-muted font-weight-bold">@Model.Role</span>
                        </div>
                    </div>
                    <div class="d-flex align-items-center pb-9">
                        <div class="symbol symbol-45 symbol-light mr-4">
                            <span class="symbol-label">
                                <span class="svg-icon svg-icon-2x svg-icon-dark-50">
                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <rect x="0" y="0" width="24" height="24" />
                                            <polygon fill="#000000" opacity="0.3" points="5 15 3 21.5 9.5 19.5" />
                                            <path d="M13.5,21 C8.25329488,21 4,16.7467051 4,11.5 C4,6.25329488 8.25329488,2 13.5,2 C18.7467051,2 23,6.25329488 23,11.5 C23,16.7467051 18.7467051,21 13.5,21 Z M9,8 C8.44771525,8 8,8.44771525 8,9 C8,9.55228475 8.44771525,10 9,10 L18,10 C18.5522847,10 19,9.55228475 19,9 C19,8.44771525 18.5522847,8 18,8 L9,8 Z M9,12 C8.44771525,12 8,12.4477153 8,13 C8,13.5522847 8.44771525,14 9,14 L14,14 C14.5522847,14 15,13.5522847 15,13 C15,12.4477153 14.5522847,12 14,12 L9,12 Z" fill="#000000" />
                                        </g>
                                    </svg>
                                </span>
                            </span>
                        </div>
                        <div class="d-flex flex-column flex-grow-1">
                            <a href="#" class="text-dark-75 text-hover-primary mb-1 font-size-lg font-weight-bolder">@Resource.StaffType</a>
                            <span class="text-muted font-weight-bold">@Model.StaffType</span>
                        </div>
                    </div>
                    <div class="d-flex align-items-center pb-9">
                        <div class="symbol symbol-45 symbol-light mr-4">
                            <span class="symbol-label">
                                <span class="svg-icon svg-icon-2x svg-icon-dark-50">
                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <rect x="0" y="0" width="24" height="24" />
                                            <path d="M11.575,21.2 C6.175,21.2 2.85,17.4 2.85,12.575 C2.85,6.875 7.375,3.05 12.525,3.05 C17.45,3.05 21.125,6.075 21.125,10.85 C21.125,15.2 18.825,16.925 16.525,16.925 C15.4,16.925 14.475,16.4 14.075,15.65 C13.3,16.4 12.125,16.875 11,16.875 C8.25,16.875 6.85,14.925 6.85,12.575 C6.85,9.55 9.05,7.1 12.275,7.1 C13.2,7.1 13.95,7.35 14.525,7.775 L14.625,7.35 L17,7.35 L15.825,12.85 C15.6,13.95 15.85,14.825 16.925,14.825 C18.25,14.825 19.025,13.725 19.025,10.8 C19.025,6.9 15.95,5.075 12.5,5.075 C8.625,5.075 5.05,7.75 5.05,12.575 C5.05,16.525 7.575,19.1 11.575,19.1 C13.075,19.1 14.625,18.775 15.975,18.075 L16.8,20.1 C15.25,20.8 13.2,21.2 11.575,21.2 Z M11.4,14.525 C12.05,14.525 12.7,14.35 13.225,13.825 L14.025,10.125 C13.575,9.65 12.925,9.425 12.3,9.425 C10.65,9.425 9.45,10.7 9.45,12.375 C9.45,13.675 10.075,14.525 11.4,14.525 Z" fill="#000000" />
                                        </g>
                                    </svg>
                                </span>
                            </span>
                        </div>
                        <div class="d-flex flex-column flex-grow-1">
                            <a href="#" class="text-dark-75 text-hover-primary mb-1 font-size-lg font-weight-bolder">@Resource.Email</a>
                            <span class="text-muted font-weight-bold">@Model.Email</span>
                        </div>
                    </div>
                    <div class="d-flex align-items-center pb-5">
                        <div class="symbol symbol-45 symbol-light mr-4">
                            <span class="symbol-label">
                                <span class="svg-icon svg-icon-2x svg-icon-dark-50">
                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <rect x="0" y="0" width="24" height="24" />
                                            <path d="M11.914857,14.1427403 L14.1188827,11.9387145 C14.7276032,11.329994 14.8785122,10.4000511 14.4935235,9.63007378 L14.3686433,9.38031323 C13.9836546,8.61033591 14.1345636,7.680393 14.7432841,7.07167248 L17.4760882,4.33886839 C17.6713503,4.14360624 17.9879328,4.14360624 18.183195,4.33886839 C18.2211956,4.37686904 18.2528214,4.42074752 18.2768552,4.46881498 L19.3808309,6.67676638 C20.2253855,8.3658756 19.8943345,10.4059034 18.5589765,11.7412615 L12.560151,17.740087 C11.1066115,19.1936265 8.95659008,19.7011777 7.00646221,19.0511351 L4.5919826,18.2463085 C4.33001094,18.1589846 4.18843095,17.8758246 4.27575484,17.613853 C4.30030124,17.5402138 4.34165566,17.4733009 4.39654309,17.4184135 L7.04781491,14.7671417 C7.65653544,14.1584211 8.58647835,14.0075122 9.35645567,14.3925008 L9.60621621,14.5173811 C10.3761935,14.9023698 11.3061364,14.7514608 11.914857,14.1427403 Z" fill="#000000" />
                                        </g>
                                    </svg>
                                </span>
                            </span>
                        </div>
                        <div class="d-flex flex-column flex-grow-1">
                            <a href="#" class="text-dark-75 text-hover-primary mb-1 font-size-lg font-weight-bolder">@Resource.PhoneNumber</a>
                            <span class="text-muted font-weight-bold">@(Model.PhoneNumber ?? "///")</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="separator separator-solid my-5"></div>

            <div class="py-4 px-8">
                <div class="d-flex align-items-center pb-9">
                    <span class="svg-icon svg-icon-primary svg-icon-2x mr-4">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                <rect x="0" y="0" width="24" height="24" />
                                <path d="M4.88230018,17.2353996 L13.2844582,0.431083506 C13.4820496,0.0359007077 13.9625881,-0.12427877 14.3577709,0.0733126292 C14.5125928,0.15072359 14.6381308,0.276261584 14.7155418,0.431083506 L23.1176998,17.2353996 C23.3152912,17.6305824 23.1551117,18.1111209 22.7599289,18.3087123 C22.5664522,18.4054506 22.3420471,18.4197165 22.1378777,18.3482572 L14,15.5 L5.86212227,18.3482572 C5.44509941,18.4942152 4.98871325,18.2744737 4.84275525,17.8574509 C4.77129597,17.6532815 4.78556182,17.4288764 4.88230018,17.2353996 Z" fill="#000000" fill-rule="nonzero" transform="translate(14.000087, 9.191034) rotate(-315.000000) translate(-14.000087, -9.191034) " />
                            </g>
                        </svg>
                    </span>
                    <div class="d-flex flex-column flex-grow-1">
                        <a href="#" class="text-dark-75 text-hover-primary mb-1 font-size-lg font-weight-bolder">@Resource.Address</a>
                        <span class="text-muted font-weight-bold">@Model.Address</span>
                    </div>
                </div>
                <div class="d-flex align-items-center pb-9">
                    <span class="svg-icon svg-icon-primary svg-icon-2x mr-4">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                <rect x="0" y="0" width="24" height="24" />
                                <path d="M19,11 L21,11 C21.5522847,11 22,11.4477153 22,12 C22,12.5522847 21.5522847,13 21,13 L19,13 C18.4477153,13 18,12.5522847 18,12 C18,11.4477153 18.4477153,11 19,11 Z M3,11 L5,11 C5.55228475,11 6,11.4477153 6,12 C6,12.5522847 5.55228475,13 5,13 L3,13 C2.44771525,13 2,12.5522847 2,12 C2,11.4477153 2.44771525,11 3,11 Z M12,2 C12.5522847,2 13,2.44771525 13,3 L13,5 C13,5.55228475 12.5522847,6 12,6 C11.4477153,6 11,5.55228475 11,5 L11,3 C11,2.44771525 11.4477153,2 12,2 Z M12,18 C12.5522847,18 13,18.4477153 13,19 L13,21 C13,21.5522847 12.5522847,22 12,22 C11.4477153,22 11,21.5522847 11,21 L11,19 C11,18.4477153 11.4477153,18 12,18 Z" fill="#000000" fill-rule="nonzero" opacity="0.3" />
                                <circle fill="#000000" opacity="0.3" cx="12" cy="12" r="2" />
                                <path d="M12,17 C14.7614237,17 17,14.7614237 17,12 C17,9.23857625 14.7614237,7 12,7 C9.23857625,7 7,9.23857625 7,12 C7,14.7614237 9.23857625,17 12,17 Z M12,19 C8.13400675,19 5,15.8659932 5,12 C5,8.13400675 8.13400675,5 12,5 C15.8659932,5 19,8.13400675 19,12 C19,15.8659932 15.8659932,19 12,19 Z" fill="#000000" fill-rule="nonzero" />
                            </g>
                        </svg>
                    </span>
                    <div class="d-flex flex-column flex-grow-1">
                        <a href="#" class="text-dark-75 text-hover-primary mb-1 font-size-lg font-weight-bolder">@Resource.City</a>
                        <span class="text-muted font-weight-bold">@Model.City @(string.IsNullOrEmpty(Model.PostalCode) ? "" : $", {Model.PostalCode}")</span>
                    </div>
                </div>
                <div class="d-flex align-items-center pb-9">
                    <span class="svg-icon svg-icon-primary svg-icon-2x mr-4">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                <rect x="0" y="0" width="24" height="24" />
                                <circle fill="#000000" opacity="0.3" cx="12" cy="12" r="9" />
                                <path d="M11.7357634,20.9961946 C6.88740052,20.8563914 3,16.8821712 3,12 C3,11.9168367 3.00112797,11.8339369 3.00336944,11.751315 C3.66233009,11.8143341 4.85636818,11.9573854 4.91262842,12.4204038 C4.9904938,13.0609191 4.91262842,13.8615942 5.45804656,14.101772 C6.00346469,14.3419498 6.15931561,13.1409372 6.6267482,13.4612567 C7.09418079,13.7815761 8.34086797,14.0899175 8.34086797,14.6562185 C8.34086797,15.222396 8.10715168,16.1034596 8.34086797,16.2636193 C8.57458427,16.423779 9.5089688,17.54465 9.50920913,17.7048097 C9.50956962,17.8649694 9.83857487,18.6793513 9.74040201,18.9906563 C9.65905192,19.2487394 9.24857641,20.0501554 8.85059781,20.4145589 C9.75315358,20.7620621 10.7235846,20.9657742 11.7357634,20.9960544 L11.7357634,20.9961946 Z M8.28272988,3.80112099 C9.4158415,3.28656421 10.6744554,3 12,3 C15.5114513,3 18.5532143,5.01097452 20.0364482,7.94408274 C20.069657,8.72412177 20.0638332,9.39135321 20.2361262,9.6327358 C21.1131932,10.8600506 18.0995147,11.7043158 18.5573343,13.5605384 C18.7589671,14.3794892 16.5527814,14.1196773 16.0139722,14.886394 C15.4748026,15.6527403 14.1574598,15.137809 13.8520064,14.9904917 C13.546553,14.8431744 12.3766497,15.3341497 12.4789081,14.4995164 C12.5805657,13.664636 13.2922889,13.6156126 14.0555619,13.2719546 C14.8184743,12.928667 15.9189236,11.7871741 15.3781918,11.6380045 C12.8323064,10.9362407 11.963771,8.47852395 11.963771,8.47852395 C11.8110443,8.44901109 11.8493762,6.74109366 11.1883616,6.69207022 C10.5267462,6.64279981 10.170464,6.88841096 9.20435656,6.69207022 C8.23764828,6.49572949 8.44144409,5.85743687 8.2887174,4.48255778 C8.25453994,4.17415686 8.25619136,3.95717082 8.28272988,3.80112099 Z M20.9991771,11.8770357 C20.9997251,11.9179585 21,11.9589471 21,12 C21,16.9406923 17.0188468,20.9515364 12.0895088,20.9995641 C16.970233,20.9503326 20.9337111,16.888438 20.9991771,11.8770357 Z" fill="#000000" opacity="0.3" />
                            </g>
                        </svg>
                    </span>
                    <div class="d-flex flex-column flex-grow-1">
                        <a href="#" class="text-dark-75 text-hover-primary mb-1 font-size-lg font-weight-bolder">@Resource.Country</a>
                        <span class="text-muted font-weight-bold">@Model.Country</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="flex-row-fluid ml-lg-8">
        <div class="card card-custom gutter-bs">
            <div class="card-header card-header-tabs-line">
                <div class="card-toolbar">
                    <ul class="nav nav-tabs nav-bold nav-tabs-line justify-content-center kt_tabs">
                        <li class="nav-item mx-2" id="kt_attendance_tab">
                            <a class="nav-link text-active-primary active" id="tab_attendance" data-bs-toggle="tab" href="/Profile/_Attendance?ide=@Model.StaffIde" data-target="#kt_attendance">
                                <span class="nav-icon mr-2"><i class="fab fa-atlassian menu-icon mr-3"></i></span>
                                <span class="nav-text font-size-h6">@Resource.Attendance</span>
                            </a>
                        </li>
                        <li class="nav-item mx-2" id="kt_absence_tab">
                            <a class="nav-link text-active-primary" id="tab_absence" data-bs-toggle="tab" href="/Profile/_Absence?ide=@Model.StaffIde" data-target="#kt_absence">
                                <span class="nav-icon mr-2"><i class="fas fa-calendar-times menu-icon mr-3"></i></span>
                                <span class="nav-text font-size-h6">@Resource.Absences</span>
                            </a>
                        </li>
                        <li class="nav-item mx-2" id="kt_department_tab">
                            <a class="nav-link text-active-primary" id="tab_department" data-bs-toggle="tab" href="/Profile/_Department?ide=@Model.StaffIde" data-target="#kt_department">
                                <span class="nav-icon mr-2"><i class="far fa-building"></i></span>
                                <span class="nav-text font-size-h6">@Resource.Departments</span>
                            </a>
                        </li>
                        <li class="nav-item mx-2" id="kt_document_tab">
                            <a class="nav-link text-active-primary" id="tab_document" data-bs-toggle="tab" href="/Profile/_Document?ide=@Model.StaffIde" data-target="#kt_document">
                                <span class="nav-icon mr-2"><i class="far fa-file-alt"></i></span>
                                <span class="nav-text font-size-h6">@Resource.Documents1</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="card-body px-0 pt-3">
                <div class="tab-content px-10">
                    <div class="tab-pane fade show active" role="tabpanel">
                        <div class="mt-1" id="kt_attendance"></div>
                    </div>
                </div>
                <div class="tab-content px-10">
                    <div class="tab-pane fade show" role="tabpanel">
                        <div class="mt-1" id="kt_absence"></div>
                    </div>
                </div>
                <div class="tab-content px-10">
                    <div class="tab-pane fade show" role="tabpanel">
                        <div class="mt-1" id="kt_department"></div>
                    </div>
                </div>
                <div class="tab-content px-10">
                    <div class="tab-pane fade show" role="tabpanel">
                        <div class="mt-1" id="kt_document"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@Html.AntiForgeryToken()

@section Scripts {
    <script>
        $(document).ready(function () {
            setTimeout(function () {
                $($('.kt_tabs').find('a')[0]).trigger('click');
            }, 150);

            $('[data-bs-toggle="tab"]').click(function (e) {
                e.preventDefault();
                load_url = $(this).attr('href'),
                    target = $(this).attr('data-target');

                $.get(load_url, function (data) {
                    $('.tab-content').find('.active').removeClass('active');
                    $(target).parent().addClass('active');
                    $(target).html(data);
                });

                $(this).tab('show')
                return false;
            });

            KTProfile.init();
        });

        var KTProfile = function () {
            var avatar;
            var offcanvas;

            var init_aside = function () {
                offcanvas = new KTOffcanvas('kt_profile_aside', {
                    overlay: true,
                    baseClass: 'offcanvas-mobile',
                    toggleBy: 'kt_subheader_mobile_toggle'
                });
            }

            var init_form = function () {
                avatar = new KTImageInput('kt_profile_avatar');
            }

            return {
                init: function () {
                    init_aside();
                    init_form();
                }
            }
        }();

        function load_more(e) {
            $(e).parent().find('.load-less-fst').removeClass('d-none');
            $(e).parent().parent().find('.load-less-snd').removeClass('d-none');
            $(e).addClass('d-none');
        }

        function load_less(e) {
            $(e).addClass('d-none');
            $(e).parent().addClass('d-none');
            $(e).parent().parent().find('.load-more').removeClass('d-none');
        }
    </script>
}
